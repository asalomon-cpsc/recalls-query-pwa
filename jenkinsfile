pipeline {
    agent any

    stages{
        stage('Build'){
            steps{
                echo 'Building..'
                bat 'npm install'
            }
        }
        stage('Deliver for development') {
            when {
                branch 'ui-enhancements'  //need to change to development or staging
            }
            steps {
               echo 'packaging and deploying for development'
               bat 'npm run build'
               bat 'xcopy  dist \\\\rmspreprodweb1\\c$\\inetpub\\wwwroot\\recalls-pwa-api\\wwwroot /f /e /y /S'
               bat 'xcopy  dist \\\\rmspreprodweb1\\c$\\inetpub\\wwwroot\\recalls-pwa-api\\wwwroot /f /e /y /S'
            }
        }
        stage('Deploy for production') {
            when {
                branch 'production'  
            }
            steps {
               echo 'packaging and deploying for production'
               bat 'npm run build'
               bat 'xcopy  dist  \\\\rmsprodweb1\\c$\\inetpub\\wwwroot\\recalls-pwa-api\\wwwroot /f /e /y /S'
               bat 'xcopy  dist  \\\\rmsprodweb1\\c$\\inetpub\\wwwroot\\recalls-pwa-api\\wwwroot /f /e /y /S'
            }
        }
      
    }
}