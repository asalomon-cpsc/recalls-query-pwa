pipeline {
    agent any

    stages{
        stage('Build'){
            steps{
                echo 'Building..'
                bat 'npm install'
            }
        }
        stage('Deliver for development') {
            when {
                branch 'ui-enhancements'  //need to change to development or staging
            }
            steps {
               echo 'packaging and deploying for development'
               bat 'npm run build'
               bat 'xcopy  /f /e /y  dist   \\\\rmspreprodweb1\\c$\\inetpub\\wwwroot\\recalls-pwa-api\\wwwroot'
               bat 'xcopy  /f /e /y  dist   \\\\rmspreprodweb2\\c$\\inetpub\\wwwroot\\recalls-pwa-api\\wwwroot'
            }
        }
        stage('Deploy for production') {
            when {
                branch 'production'  
            }
            steps {
               echo 'packaging and deploying for production'
               bat 'npm run build'
               bat 'xcopy  /f /e /y  dist   \\\\rmsprodweb1\\c$\\inetpub\\wwwroot\\recalls-pwa-api\\wwwroot'
               bat 'xcopy  /f /e /y  dist   \\\\rmsprodweb2\\c$\\inetpub\\wwwroot\\recalls-pwa-api\\wwwroot'
            }
        }
      
    }
}